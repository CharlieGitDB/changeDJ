function start(){isUserAuthenticated(),loginUser(),registerUser(),swapRegisterLoginButtons(),userView(),hideHelp(),$.getScript("http://apis.google.com/js/client.js?onload=init")}function isUserAuthenticated(){$(".optionviewleft").hide(),$(".holdall, .ifRemembered").hide(),$.ajax({method:"GET",url:"/isuserloggedin"}).done(function(a){"yes"==a?0==mainPageCounter&&(mainPageLogic(),mainPageCounter++):($(".holdall, .ifRemembered").show(),hasUserBeenHereBefore())})}function hasUserBeenHereBefore(){$(".regShow, .loginShow, .regerrs, .logerr, .usertaken").hide(),void 0==localStorage.hasUserBeenHere?($(".regShow").show(),$(".regUser").focus()):($(".loginShow").show(),$(".loginUser").focus())}function swapRegisterLoginButtons(){$(".swapbtn").on("click",function(a){a.preventDefault(),"none"==$(".regShow").css("display")?($(".regShow").show(),$(".regUser").focus(),$(".ifRemembered :input").val(""),$(".loginShow").hide(),$(".regerrs").hide()):($(".regShow").hide(),$(".loginShow").show(),$(".loginUser").focus())})}function registerUser(){$(".submitreg").on("click",function(a){if(a.preventDefault(),$(".passwordRegUser").val()!=$(".passwordRegUser2").val()&&($(".regerrs").text("Passwords must match."),$(".regerrs").show()),$(".regUser").val().length<3&&($(".regerrs").text("Username must be at least 3 characters long."),$(".regerrs").show()),($(".passwordRegUser").val().length<5||$(".passwordRegUser2").val().length<5)&&($(".regerrs").text("Password be at least 5 characters long."),$(".regerrs").show()),$(".regUser").val().length>=3&&$(".passwordRegUser").val().length>=5&&$(".passwordRegUser2").val().length>=5&&$(".passwordRegUser").val()==$(".passwordRegUser2").val()){var b={username:$(".regUser").val(),password:$(".passwordRegUser").val()};$.ajax({method:"POST",url:"/register",data:b}).done(function(a){"registered"==a?($(".holdall, .ifRemembered").hide(),0==mainPageCounter&&(mainPageLogic(),mainPageCounter++)):($(".regerrs").text("Username is taken."),$(".regerrs").show())})}})}function loginUser(){$(".reqLogin").on("click",function(a){a.preventDefault();var b={remember:$("remembercheckbox").is(":checked"),username:$(".loginUser").val(),password:$(".passwordLoginUser").val()};$.ajax({method:"POST",url:"/login",data:b}).done(function(a){"failed"==a?($(".logerr").show(),$(".ifRemembered :input").val(""),$(".loginUser").focus()):($(".holdall, .ifRemembered").hide(),0==mainPageCounter&&(mainPageLogic(),mainPageCounter++))})})}function hideHelp(){$(".helppagebg").hide(),$(".helpclasscontent").hide()}function init(){gapi.client.setApiKey("AIzaSyBRtVVHPmgkcUe36EUdHN-yWetm7-IjIO0"),gapi.client.load("youtube","v3",function(){})}localStorage.hasUserBeenHere,$(function(){start()});