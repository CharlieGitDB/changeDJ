function onYouTubeIframeAPIReady(){player=new YT.Player("player",{height:$(".mainrightcontainer").width()/2,width:$(".mainrightcontainer").width(),events:{onReady:onPlayerReady,onStateChange:onPlayerStateChange,onError:onPlayerError},playerVars:{controls:0,disabled:1}}),console.log(joinVideo,"from youtube"),console.log(joinTime,"from youtube")}function sendCurrentTime(){currentSongTimeTimer=setInterval(function(){var a=player.getCurrentTime();socket.emit("current time of video",a)},1e3)}function clearCurrentTime(){clearInterval(currentSongTimeTimer),socket.emit("clear current time of video")}function playNextSong(){socket.emit("play next song")}function onPlayerError(a){console.log(a),socket.emit("user video error")}function onPlayerReady(a){joinVideo&&void 0!=joinTime?playSong(joinVideo,Math.floor(joinTime)+5):console.log("nothing to play")}function onPlayerStateChange(a){0===a.data&&(clearCurrentTime(),playNextSong()),1===a.data&&(console.log("playing"),$(".videoTitleSpan").text(player.getVideoData().title),sendCurrentTime())}function playSong(a,b){player.loadVideoById({videoId:a,startSeconds:b})}var tag=document.createElement("script");tag.src="https://www.youtube.com/iframe_api";var firstScriptTag=document.getElementsByTagName("script")[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag);var joinVideo,joinTime;socket.on("current playing data",function(a){joinVideo=a.songlist,joinTime=a.songtime});var player,currentSongTimeTimer;socket.on("song play from server",function(a){playSong(a,0)});